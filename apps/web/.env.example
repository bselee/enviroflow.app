# EnviroFlow Environment Variables
# Copy this file to .env.local and fill in your values

# =============================================================================
# REQUIRED - Supabase Configuration
# =============================================================================

# Supabase Project URL
# Get from: Supabase Dashboard → Settings → API → Project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anonymous Key (public, safe for client-side)
# Get from: Supabase Dashboard → Settings → API → anon public
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase Service Role Key (secret, server-side only!)
# Get from: Supabase Dashboard → Settings → API → service_role secret
# WARNING: Never expose this in client-side code!
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# =============================================================================
# REQUIRED - Application URL
# =============================================================================

# Your application URL (used for OAuth redirects, etc.)
NEXT_PUBLIC_APP_URL=https://enviroflow.app

# =============================================================================
# OPTIONAL - AI Integration (xAI/Grok)
# =============================================================================

# xAI API Key for AI-powered environmental analysis (Vercel standard naming)
# Get from: https://x.ai/api
# Leave empty to disable AI features
# Note: XAI_API_KEY is preferred; GROK_API_KEY is supported for backward compatibility
XAI_API_KEY=xai-...
# GROK_API_KEY=xai-...  # Deprecated: use XAI_API_KEY instead

# =============================================================================
# OPTIONAL - Push Notifications
# =============================================================================

# VAPID keys for Web Push notifications (browser push)
# Generate with: npx web-push generate-vapid-keys
NEXT_PUBLIC_VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:notifications@enviroflow.app

# Firebase Cloud Messaging for Android push (optional)
# Get from: Firebase Console → Project Settings → Service Accounts
FIREBASE_PROJECT_ID=
FIREBASE_CLIENT_EMAIL=
# Note: Replace \n with actual newlines in the private key
FIREBASE_PRIVATE_KEY=

# Legacy FCM server key (deprecated but still works)
# Get from: Firebase Console → Project Settings → Cloud Messaging → Server key
FCM_SERVER_KEY=

# Apple Push Notification Service (iOS) - coming soon
# Requires .p8 key file from Apple Developer Console
# APNS_KEY_ID=
# APNS_TEAM_ID=
# APNS_BUNDLE_ID=

# =============================================================================
# OPTIONAL - Cron Security
# =============================================================================

# Secret token for cron endpoint authentication
# Generate a random string: openssl rand -hex 32
CRON_SECRET=

# =============================================================================
# OPTIONAL - AC Infinity Direct API (for live sensor data)
# =============================================================================
#
# The live sensor dashboard automatically uses credentials from registered
# AC Infinity controllers in the database. No configuration needed if you've
# already added a controller through the app!
#
# These env vars are only needed if:
# - You haven't added any AC Infinity controllers yet
# - You want to use different credentials than your registered controllers
# - You're running the app without a database (Supabase not configured)
#
# Priority order:
# 1. AC_INFINITY_TOKEN env var (manual)
# 2. AC_INFINITY_EMAIL/PASSWORD env vars
# 3. Credentials from database (automatic - recommended)

# Option 1: Manual Token (extract from browser)
# How to get:
#   1. Go to https://myacinfinity.com and log in
#   2. Open DevTools (F12) → Network tab
#   3. Find any API request → Copy 'User-Token' header value
AC_INFINITY_TOKEN=

# Option 2: Auto-Login with Credentials
# The system will automatically log in and cache the token for 24 hours.
# Tokens are refreshed automatically when they expire.
AC_INFINITY_EMAIL=
AC_INFINITY_PASSWORD=

# =============================================================================
# REQUIRED - Credential Encryption
# =============================================================================

# AES-256-GCM encryption key for controller credentials (32 bytes = 64 hex chars)
# CRITICAL: This key encrypts all stored controller credentials (email/password)
# Generate with: openssl rand -hex 32
# WARNING: Losing this key means ALL stored credentials become unreadable!
# Store this key securely and back it up!
ENCRYPTION_KEY=
